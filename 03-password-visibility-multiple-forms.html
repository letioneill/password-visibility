<!DOCTYPE html>
<html>

<head>
  <title>Password Visibility - Multiple Forms</title>
  <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body>

  <h1>Password Visibility - Multiple Forms</h1>

  <form>
    <fieldset>
      <legend>Change Username</legend>
      <p class="helper">Enter your username and password to change your username.</p>
      <div>
        <label for="username">Username</label>
        <input type="text" name="username" id="username">
      </div>

      <div>
        <label for="password">Password</label>
        <input type="password" data-type="password" name="password" id="password">
      </div>

      <div>
        <label for="show-password">
          <input type="checkbox" name="show-password" id="show-password">
          Show password
        </label>
      </div>

      <p>
        <button type="submit">Change Username</button>
      </p>
    </fieldset>

  </form>


  <form>
    <fieldset>
      <legend>Change Password</legend>
      <p class="helper">Enter your current password and new password below.</p>
      <div>
        <label for="current-password">Current Password</label>
        <input type="password" data-type="password" name="current-password" id="current-password">
      </div>

      <div>
        <label for="new-password">New Password</label>
        <input type="password" data-type="password" name="new-password" id="new-password">
      </div>

      <div>
        <label for="show-passwords">
          <input type="checkbox" name="show-passwords" id="show-passwords">
          Show passwords
        </label>
      </div>

      <p>
        <button type="submit">Change Passwords</button>
      </p>
    </fieldset>
  </form>

  <script>

    /* Polyfill */
    'use strict'
    if (!Element.prototype.matches) {
      Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector
    }

    // Firefox-proof
    const checkBoxes = Array.prototype.slice.call(document.querySelectorAll('[type="checkbox"]'));
    checkBoxes.forEach(function (item) {
      item.checked = false;
    })

    // ShowHide Passwords on multiple forms
    const showHide = function (event) {
      if (event.target.matches('[type="checkbox"]')) {
        const toggle = event.target;
        const form = toggle.closest('form');
        const passwords = Array.prototype.slice.call(form.querySelectorAll('[data-type="password"]'));

        passwords.forEach(function (item) {
          toggle.checked ? item.type = 'text' : item.type = 'password';
        })
      }
    }

    // Call function on click
    document.addEventListener('click', showHide, false);

  </script>
</body>

</html>